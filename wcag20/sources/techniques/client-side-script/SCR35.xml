<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE technique
  SYSTEM "../../xmlspec.dtd">
<technique id="SCR35">
   <short-name>アンカー及びボタンの onclick イベントを用いて、アクションをキーボード操作可能にする</short-name>
   <applicability>
      <p>HTML 又は XHTML で使用されるスクリプト。</p>
   </applicability>
   <applies-to>
      <success-criterion idref="keyboard-operation-keyboard-operable" relationship="sufficient"/>
      <success-criterion idref="keyboard-operation-all-funcs" relationship="sufficient"/>
   </applies-to>
   <description>
    <p>この達成方法の目的は、キーボードでアクセス可能なコントロールに加えることで、キーボードでアクセス可能になるスクリプトの関数を呼び出す方法について説明することである。スクリプトによる動きが確実にキーボードから呼び出されるように、それらの動きは「ネイティブに実行可能な」HTML 要素 (リンク及びボタン) に関連付けられている。これらの要素の onclick イベントは機器に依存していない。「onclick」という表現はマウスに関連付けられているようにも思えるが、onclick イベントは実際のところ、リンク又はボタンのデフォルトの動きにマッピングされている。デフォルトの動きは、利用者がマウスで要素をクリックしたときに発生するが、要素にフォーカスして Enter キーやスペースキーを押したとき及び、他のアクセシビリティ API によってトリガーされたときにも発生する。</p>
    <p>この達成方法はクライアントサイドスクリプトに依存しているが、スクリプトが利用できない環境に対する、代替としての実装又は説明として意味がある。アンカー要素を使って JavaScript によるアクションを呼び出すとき、代替としての実装又は説明は <att>href</att> 属性によって提供される。ボタンを使用するときは、フォームの送信によって提供される。</p>
  </description>
   <examples>
      <eg-group>
      <description><p>スクリプトを実行するリンクで、スクリプトをサポートしていないブラウザに対して代替手段を持たないもの。この方法は、スクリプトがアクセシビリティ サポーテッドな技術に依存しているときのみに使用されるべきである。</p>
<p>このリンクからナビゲートしたくないのではあるが、これを実際のリンクにし、適切なイベントを得るために、<el>a</el> 要素上の href 属性を使わなければならない。この事例では、我々は「#」をリンクターゲットとして使用しているが、何を使用しても良い。このリンクからナビゲートされることはない。</p>
<p>doStuff() イベントハンドリング関数の最後にある「return false;」は、ブラウザにその URI へ移動しないよう指示している。それがなければ、ページはスクリプト実行後に再読み込みされることになる。</p>
</description>
      <code><![CDATA[
<script> 
function doStuff()
 {
  //do stuff
    return false;
  }
</script>
<a href="#" onclick="return doStuff();">do stuff</a> ]]></code>
    </eg-group>
    <eg-group>
      <description><p>スクリプトを実行するリンクであるが、スクリプトが実行可能でなければ他のページに移動させるもの。この方法はスクリプトに依存しないサイトで、移動先がスクリプトと同じ機能を提供している場合にのみ使用される。この例は、href が実在するページである dostuff.htm に設定されていること以外は、事例 1と同じである。dostuff.htmでは、スクリプトと同じ機能を提供しなければならない。doStuff() イベントハンドリング関数の最後にある「return false;」が、ブラウザにその URI へ移動しないように指示している。そうでなければ、ブラウザはスクリプト実行後に dostuff.htm に移動してしまう。</p>
</description>
      <code><![CDATA[
<script> 
function doStuff() 
 {  
  //do stuff  
  return false; 
 }
</script>
<a href="dostuff.htm" onclick="return doStuff();">do stuff</a> ]]></code>
      <description><p>このコードの実装サンプル: <loc xmlns:xlink="http://www.w3.org/1999/xlink" href="https://www.w3.org/WAI/WCAG20/Techniques/working-examples/SCR35/jslink.html"><!-- linktype="examples"-->JavaScriptを用いてアクションリンクを作成</loc></p>
</description>
    </eg-group>
    <eg-group>
      <description><p>スクリプトを実行して、かつスクリプトを使わない利用者のためにフォーム送信を代替とするボタン。このアプローチは、スクリプトに依存しないサイトで、フォームの送信がスクリプトと同じ機能を提供できる場合にのみ使用できる。onsubmit="return false;" はフォームから送信されるのを防ぐ。</p>
</description>
      <code><![CDATA[
<script>
  function doStuff()
 {
     //do stuff
 }
</script>
<form action="doStuff.aspx" onsubmit="return false;">
 <input type="submit" value="Do Stuff" onclick="doStuff();" />
</form> ]]></code>
      <description><p>このコードの実装サンプル: <loc xmlns:xlink="http://www.w3.org/1999/xlink" href="https://www.w3.org/WAI/WCAG20/Techniques/working-examples/SCR35/jsbutton.html"><!-- linktype="examples"-->JavaScript を用いてアクションボタンを作成</loc></p>
</description>
    </eg-group>
    <eg-group>
      <description><p>スクリプトを実行するボタンで、<code>input type="image"</code> を用いて実装されているもの。<code>input</code> には、画像と等価のテキストを提供するために、タイトル属性を追加しなければならないことに注意する。この方法は、スクリプトに依存しているときのみに利用すべきである。</p>
</description>
      <code><![CDATA[
<script>
  function doStuff()
  {
     //do stuff
   return false;
  }
</script>
<input type="image" src="stuff.gif" title="Do stuff" onclick="return doStuff();" /> ]]></code>
    </eg-group>
    <eg-group>
      <description><p>スクリプトを実行するボタンで、<code>input type="submit"</code>、<code>input type="reset"</code> 又は <code>input type="button"</code> のいずれかを用いて実装されているもの。この方法は、スクリプトに依存しているときのみに利用すべきである。</p>
</description>
      <code><![CDATA[
<input type="submit" onclick="return doStuff();" value="Do Stuff" />]]></code>
    </eg-group>
    <eg-group>
      <description><p>スクリプトを実行するボタンで、<code>button</code>…<code>/button</code> を用いて実装されているもの。これは、ボタンの見た目をより詳細に調整したいときに有効である。この特定の例では、ボタンはアイコンとテキストの両方を含んでいる。この方法は、スクリプトに依存しているときのみに利用すべきである。 </p>
</description>
      <code><![CDATA[
<button onclick="return doStuff();">
 <img src="stuff.gif" alt="stuff icon">
 Do Stuff
</button>]]></code>
    </eg-group>
   </examples>
   <resources>
      <see-also>
         <ulist>
            <item>
               <p>
                  <loc xmlns:xlink="http://www.w3.org/1999/xlink"
                       href="http://www.w3.org/TR/REC-html40/interact/scripts.html">HTML 4.01 Scripts</loc>
               </p>
            </item>
            <item>
               <p>
                  <loc xmlns:xlink="http://www.w3.org/1999/xlink"
                       href="http://www.w3.org/TR/REC-html40/interact/forms.html">HTML 4.01 Forms</loc>
               </p>
            </item>
            <item>
               <p>
                  <loc xmlns:xlink="http://www.w3.org/1999/xlink"
                       href="http://www.w3.org/TR/REC-html40/struct/links.html">HTML 4.01 Links</loc>
               </p>
            </item>
            <item>
               <p>
                  <loc xmlns:xlink="http://www.w3.org/1999/xlink"
                       href="http://www.w3.org/DOM/DOMTR">Document Object Model (DOM) Technical Reports</loc>
               </p>
            </item>
         </ulist>
        <trnote>
          <p>DOM 仕様は現在、WHATWG で策定されている。<a href="https://dom.spec.whatwg.org/">DOM Standard</a> も参照のこと。</p>
        </trnote>
      </see-also>
   </resources>
   <related-techniques>
      <relatedtech idref="G90"/>
      <relatedtech idref="G108"/>
      <relatedtech idref="H91"/>
      <relatedtech idref="SCR20"/>
      <relatedtech idref="SCR24"/>
      <relatedtech idref="F42"/>
      <relatedtech idref="F59"/>
   </related-techniques>
   <tests>
      <procedure>
      <p><el>a</el>、<el>button</el>、又は <el>input</el> 要素と関連付けられたすべてのスクリプトのアクションについて:</p>
      <olist>
        <item><p>スクリプトをサポートするユーザエージェントで:</p>
						<ulist><item><p>マウスを用い、コントロールをクリックする。</p></item>
<item><p>スクリプトのアクションが適切に実行されることを確認する。</p></item>
<item><p>コントロールがアンカー要素である場合、アンカー要素の <att>href</att> 属性の URI が呼び出されないことを確認する。</p></item>
<item><p>キーボードでコントロールに移動して、フォーカスを与えることが可能であることを確認する。</p></item>
<item><p>キーボードのフォーカスをコントロールに設定する。</p></item>
<item><p>Enter キーを押すことで、スクリプトのアクションを呼び出すことを確認する。</p></item>
<item><p>コントロールがアンカー要素である場合、アンカー要素の <att>href</att> 属性の URI が呼び出されないことを確認する。</p></item></ulist></item>
        <item><p>スクリプトをサポートしていないユーザエージェントで:</p>
						<ulist><item><p>マウスでコントロールをクリックする。</p></item>
<item><p>コントロールがアンカー要素である場合、アンカー要素の <att>href</att> 属性の URI が呼び出されることを確認する。</p></item>
<item><p>キーボードでコントロールに移動して、フォーカスを与えることが可能であることを確認する。</p></item>
<item><p>キーボードのフォーカスをコントロールに設定する。</p></item>
<item><p>コントロールがアンカー要素である場合、Enter キーを押すことでアンカー要素の <att>href</att> 属性の URI が呼び出されることを確認する。</p></item></ulist></item>
      </olist>
    </procedure>
      <expected-results>
         <ulist>
            <item>
               <p>上記の手順全ての結果が真である。</p>
            </item>
         </ulist>
      </expected-results>
   </tests>
</technique>
